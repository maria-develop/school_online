# Описание проекта

Этот проект представляет собой серверную часть системы для управления курсами и уроками. 
Проект реализован с использованием Django и Django REST Framework (DRF). 
Основная цель - предоставить API для работы с курсами и уроками, 
чтобы клиентская сторона могла взаимодействовать с сервером, 
отправляя и получая JSON-структуры.

Проект реализует:

CRUD-операции для курсов, уроков, подписок и платежей через API.
Связь между курсами и уроками (каждый курс может содержать несколько уроков)
Связь между платежами, курсами, уроками, подписками и пользователями.
Настроены права доступа к функционалу по группам пользователей и модераторов.
Настроена проверка ссылки на канал youtube.com и пагинация.
Настроен вывод документации проекта.
Реализована возможность оплаты курсов.
Настроена асинхронная рассылка на почту пользователям об обновлении материалов курса 
и блокировка пользователей, неактивных последние 30 дней с помощью Celery.
Написаны тесты.

## Функциональные возможности

1. Кастомная модель пользователя:
Аутентификация через email.
Поля: телефон, город, аватар.

2. Управление курсами:
CRUD-операции для курсов (создание, получение списка, обновление, удаление).
Реализовано с использованием ViewSet.

3. Управление уроками:
CRUD-операции для уроков (создание, получение списка, получение конкретного урока, обновление, удаление).
Реализовано с использованием Generic-классов.

4. Управление платежами:
CRUD-операции для курсов (создание, получение списка, обновление, удаление).
Реализовано с использованием APIView.

5. Управление подписками:
Пользователь может подписаться на курс

6. Связь между сущностями:
Уроки связаны с курсами через внешние ключи.
В одном курсе может быть множество уроков.
Платежи связаны с курасми, уроками и пользователями.

## Установка

1. Клонируйте репозиторий:
https://github.com/maria-develop/school_online

2. Создайте виртуальное окружение и активируйте его:
python -m venv venv
source venv/bin/activate  # Linux/macOS
venv\Scripts\activate  # Windows

3. Установите зависимости:
pip install -r requirements.txt

4. Примените миграции:
python manage.py migrate

5. Запустите сервер:
python manage.py runserver


## Использование API

1. Курс (/courses/):

GET /courses/ — Получение списка курсов.

POST /courses/ — Создание нового курса.

GET /courses/{id}/ — Получение информации о курсе.

PUT /courses/{id}/ — Полное обновление курса.

PATCH /courses/{id}/ — Частичное обновление курса.

DELETE /courses/{id}/ — Удаление курса.

2. Урок (/lessons/):

GET /lessons/ — Получение списка уроков.

POST /lessons/ — Создание нового урока.

GET /lessons/{id}/ — Получение информации об уроке.

PUT /lessons/{id}/ — Полное обновление урока.

PATCH /lessons/{id}/ — Частичное обновление урока.

DELETE /lessons/{id}/ — Удаление урока.

3. Платежи (/payments/):

GET /payments/ — Получение списка платежей.

POST /payments/ — Создание нового платежа.

4. Подписка (/subscriptions/):

GET /subscriptions/ — Получение списка подписок.

POST /subscriptions/ — Создание новой подписки.

GET /subscriptions/{id}/ — Получение информации о подписках.

PUT /subscriptions/{id}/ — Полное обновление подписки.

PATCH /subscriptions/{id}/ — Частичное обновление подписки.

DELETE /subscriptions/{id}/ — Удаление подписки.


## Проверка API
Рекомендуется использовать Postman или другой инструмент для тестирования API.
Примеры запросов:

Создание курса:

POST /courses/
{
    "name": "Python Basics",
    "description": "Курс по основам Python"
}

Создание урока:

POST /lessons/
{
    "name_lesson": "Введение в Python",
    "description_lesson": "Основы Python",
    "course": 1
}

Создание пользователя:

POST /users/
{
    "email": "us@mail.ru",
    "phone": "+123456789",
    "city": "Москва"
}

Создание платежа:

POST /payments/
{
    "user": 1,
    "payment_date": "2024-11-20T12:00:00Z",
    "amount": 20000,
    "payment_method": "Перевод на счет",
    "course": 1,
    "lesson": 5
}

## Тесты
Реализованы тесты для функционала уроков и подписок.